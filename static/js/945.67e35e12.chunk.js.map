{"version":3,"file":"static/js/945.67e35e12.chunk.js","mappings":"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","sources":["components/Links.js","consts/marksmanshipPointsMap.js","helpers/math.js","pages/History.js","storage/getHistoryCOF.js","storage/storageConsts.js"],"sourcesContent":["import styled from 'styled-components'\n\nexport const LinkWrapper = styled.div`\n  margin:2rem 0;\n  text-align:center;\n`","export const marksmanshipPointsMap = {\n    a:5,\n    c:3,\n    d:0,\n    m:-10\n  }","import { marksmanshipPointsMap } from '../consts/marksmanshipPointsMap';\n\nexport function doMarksmanshipDataMath({ marksmanship, hitCountData }) {\n    return marksmanship.map(({ head, targetName, torso }) => {\n      const { headTotal, torsoTotal } = hitCountData.find(({ targetName: tn }) => targetName = tn)\n      const { a: headA, c: headC } = head\n      const { a: torsoA, c: torsoC, d: torsoD } = torso\n      const headMiss = headTotal - (headA + headC)\n      const torsoMiss = torsoTotal - (torsoA + torsoC + torsoD)\n      return ({\n        targetName,\n        head: {\n          ...head,\n          m: headMiss\n        },\n        torso: {\n          ...torso,\n          m: torsoMiss\n        },\n        points:\n          ((headA + torsoA) * marksmanshipPointsMap.a) +\n          ((headC + torsoC) * marksmanshipPointsMap.c) +\n          ((torsoD) * marksmanshipPointsMap.d) +\n          ((headMiss + torsoMiss) * marksmanshipPointsMap.d)\n      })\n    })\n  }\n\n  export function doCOFMath({ cof, hitCountData }) {\n    const { marksmanship, time } = cof\n    const totalTime = Number(Math.round(time.reduce((acc, it) => acc + it)).toFixed(2))\n    const marksmanshipWithMathDone = doMarksmanshipDataMath({ marksmanship, hitCountData })\n    const totalMarksmanshipPoints = marksmanshipWithMathDone.map(({ points }) => points).reduce((acc, it) => acc + it)\n    const hitFactor = Number((totalMarksmanshipPoints / totalTime).toFixed(3)) || 0\n    return {\n        marksmanship:marksmanshipWithMathDone,\n        time,\n        totalTime,\n        hitFactor,\n        totalMarksmanshipPoints\n    }\n  }","import { Link, useParams } from 'react-router-dom'\nimport { getHistoryForCof } from '../storage/getHistoryCOF';\nimport { LinkWrapper } from '../components/Links';\nimport { doCOFMath } from '../helpers/math';\nimport { CartesianGrid, Line, LineChart, ResponsiveContainer, Tooltip, XAxis, YAxis, } from 'recharts';\n\n\n\nexport default function HistoryPage({ getPageData }) {\n    const { cofId, runIndex } = useParams()\n    const pageData = getPageData(cofId)\n    const { hitCountData, title } = pageData\n    const COFHistory = getHistoryForCof({ cofId })\n    const cofHistoryWithMathDone = COFHistory.map((cof) => doCOFMath({ cof, hitCountData }))\n    const cofHistoryForUi = cofHistoryWithMathDone.slice(0, Math.min(cofHistoryWithMathDone.length,10))\n\n    const StyledTooltip = ()=> <Tooltip itemStyle={{color:'black'}} />\n    return (\n        <main style={{ padding: \"1rem 0\" }}>\n            <h2 style={{ color: '#CEFF51' }}>{title} HISTORY</h2>\n            <section>\n                <h3>Hit Factor</h3>\n                <ResponsiveContainer width={'100%'} aspect=\"1.5\">\n                    <LineChart data={cofHistoryForUi}\n                        margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis />\n                        <YAxis />\n                        <StyledTooltip />\n                        <Line type=\"monotone\" dataKey=\"hitFactor\" stroke=\"#CEFF51\" />\n                    </LineChart>\n                </ResponsiveContainer>\n            </section>\n            <section>\n                <h3>Marksmanship</h3>\n                <ResponsiveContainer width={'100%'} aspect=\"1.5\">\n                    <LineChart data={cofHistoryForUi}\n                        margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis />\n                        <YAxis />\n                        <StyledTooltip />\n                        <Line type=\"monotone\" dataKey=\"totalMarksmanshipPoints\" stroke=\"#CEFF51\" />\n                    </LineChart>\n                </ResponsiveContainer>\n            </section>\n            <section>\n                <h3>Time</h3>\n                <ResponsiveContainer width={'100%'} aspect=\"1.5\">\n                    <LineChart data={cofHistoryForUi}\n                        margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis />\n                        <YAxis />\n                        <StyledTooltip />\n                        <Line type=\"monotone\" dataKey=\"totalTime\" stroke=\"#CEFF51\" />\n                    </LineChart>\n                </ResponsiveContainer>\n            </section>\n            <LinkWrapper>\n                <Link to={`/`}>Home</Link>\n            </LinkWrapper>\n        </main>\n    );\n}","import { historyKey } from './storageConsts'\n\nexport function getHistoryDetailAtIndex({cofId,runIndex}){\n    const COFHistory = getHistoryForCof({cofId})\n    return COFHistory?.[runIndex]\n}\n\nexport function getCourseOfFireLastIndex({cofId}){\n    const COFHistory = getHistoryForCof({cofId})\n    return COFHistory.length - 1\n}\n\nexport function getHistoryForCof({cofId}){\n    const allHistory = JSON.parse(localStorage.getItem(historyKey) || '{}')\n    return allHistory?.[cofId]|| []\n}\n","export const inProgKey = 'inProgCOF'\nexport const historyKey = 'hist'"],"names":["LinkWrapper","styled","marksmanshipPointsMap","doMarksmanshipDataMath","marksmanship","hitCountData","map","head","targetName","torso","find","tn","headTotal","torsoTotal","headA","a","headC","c","torsoA","torsoC","torsoD","d","headMiss","torsoMiss","m","points","doCOFMath","cof","time","totalTime","Number","Math","round","reduce","acc","it","toFixed","marksmanshipWithMathDone","totalMarksmanshipPoints","hitFactor","HistoryPage","getPageData","useParams","cofId","pageData","runIndex","title","cofHistoryWithMathDone","getHistoryForCof","cofHistoryForUi","slice","min","length","StyledTooltip","itemStyle","color","style","padding","width","aspect","data","margin","top","right","left","bottom","strokeDasharray","type","dataKey","stroke","to","getHistoryDetailAtIndex","COFHistory","getCourseOfFireLastIndex","allHistory","JSON","parse","localStorage","getItem","historyKey","inProgKey"],"sourceRoot":""}